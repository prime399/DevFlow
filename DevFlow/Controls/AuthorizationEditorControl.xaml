<UserControl x:Class="DevFlow.Controls.AuthorizationEditorControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:DevFlow.Controls">
    
    <Grid RowDefinitions="Auto,*" Background="{StaticResource RequestBarBackgroundBrush}">
        <!-- Auth Header Bar -->
        <Border Grid.Row="0"
                Background="{StaticResource RequestBarBackgroundBrush}"
                BorderBrush="{StaticResource RequestBarBorderBrush}"
                BorderThickness="0,0,0,1"
                Padding="16,12">
            <Grid ColumnDefinitions="Auto,Auto,*,Auto">
                <!-- Auth Type Label -->
                <TextBlock Text="Authorization Type"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontFamily="{StaticResource AppFontFamilyMedium}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Margin="0,0,12,0" />
                
                <!-- Auth Type Dropdown -->
                <ComboBox Grid.Column="1"
                          x:Name="AuthTypeComboBox"
                          SelectionChanged="AuthType_SelectionChanged"
                          MinWidth="160"
                          Background="{StaticResource MethodSelectorBgBrush}"
                          BorderThickness="1"
                          BorderBrush="{StaticResource RequestBarBorderBrush}"
                          Padding="12,8">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       FontFamily="{StaticResource AppFontFamily}"
                                       FontSize="13" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                
                <!-- Right side controls -->
                <StackPanel Grid.Column="3"
                            Orientation="Horizontal"
                            Spacing="12"
                            VerticalAlignment="Center">
                    <CheckBox x:Name="AuthEnabledCheckbox"
                              Checked="AuthEnabled_Changed"
                              Unchecked="AuthEnabled_Changed"
                              MinWidth="0"
                              VerticalAlignment="Center" />
                    <TextBlock Text="Enabled"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="13"
                               VerticalAlignment="Center" />
                    <Button Style="{StaticResource IconButtonStyle}"
                            ToolTipService.ToolTip="Clear authorization"
                            Click="Clear_Click">
                        <FontIcon Glyph="{StaticResource IconGlyphDelete}" FontSize="14" Foreground="{StaticResource TextMutedBrush}" />
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Auth Configuration Content -->
        <Grid Grid.Row="1" Padding="24,20">
            <!-- None Auth Panel -->
            <StackPanel x:Name="AuthNonePanel" Visibility="Visible" HorizontalAlignment="Center" VerticalAlignment="Center">
                <FontIcon Glyph="&#xE72E;" FontSize="48" Foreground="{StaticResource TextMutedBrush}" Margin="0,0,0,16" HorizontalAlignment="Center" />
                <TextBlock Text="This request does not use any authorization"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontFamily="{StaticResource AppFontFamily}"
                           FontSize="14"
                           HorizontalAlignment="Center" />
            </StackPanel>
            
            <!-- Basic Auth Panel -->
            <StackPanel x:Name="AuthBasicPanel" Visibility="Collapsed" Spacing="20" MaxWidth="500">
                <StackPanel Spacing="8">
                    <TextBlock Text="Username"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <TextBox x:Name="BasicUsernameInput"
                             TextChanged="BasicAuth_TextChanged"
                             PlaceholderText="Enter username"
                             Background="{StaticResource InputBackgroundBrush}"
                             BorderBrush="{StaticResource RequestBarBorderBrush}"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             FontFamily="{StaticResource MonospaceFontFamily}"
                             Padding="12,10" />
                </StackPanel>
                <StackPanel Spacing="8">
                    <TextBlock Text="Password"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <PasswordBox x:Name="BasicPasswordInput"
                                 PasswordChanged="BasicAuth_PasswordChanged"
                                 PlaceholderText="Enter password"
                                 Background="{StaticResource InputBackgroundBrush}"
                                 BorderBrush="{StaticResource RequestBarBorderBrush}"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontFamily="{StaticResource MonospaceFontFamily}"
                                 Padding="12,10" />
                </StackPanel>
                <Border Background="{StaticResource SurfaceVariantBrush}"
                        CornerRadius="6"
                        Padding="12"
                        Margin="0,12,0,0">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE946;" FontSize="14" Foreground="{StaticResource InfoBrush}" />
                        <TextBlock Text="The authorization header will be automatically generated when you send the request."
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="{StaticResource AppFontFamily}"
                                   FontSize="12"
                                   TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
            
            <!-- Bearer Token Panel -->
            <StackPanel x:Name="AuthBearerPanel" Visibility="Collapsed" Spacing="20" MaxWidth="600">
                <StackPanel Spacing="8">
                    <TextBlock Text="Token"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <TextBox x:Name="BearerTokenInput"
                             TextChanged="BearerToken_TextChanged"
                             PlaceholderText="Enter bearer token"
                             Background="{StaticResource InputBackgroundBrush}"
                             BorderBrush="{StaticResource RequestBarBorderBrush}"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             FontFamily="{StaticResource MonospaceFontFamily}"
                             Padding="12,10"
                             AcceptsReturn="True"
                             TextWrapping="Wrap"
                             MinHeight="80" />
                </StackPanel>
                <Border Background="{StaticResource SurfaceVariantBrush}"
                        CornerRadius="6"
                        Padding="12">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE946;" FontSize="14" Foreground="{StaticResource InfoBrush}" />
                        <TextBlock Text="The token will be sent in the Authorization header as 'Bearer &lt;token&gt;'."
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="{StaticResource AppFontFamily}"
                                   FontSize="12"
                                   TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
            
            <!-- API Key Panel -->
            <StackPanel x:Name="AuthApiKeyPanel" Visibility="Collapsed" Spacing="20" MaxWidth="500">
                <StackPanel Spacing="8">
                    <TextBlock Text="Key"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <TextBox x:Name="ApiKeyNameInput"
                             TextChanged="ApiKey_TextChanged"
                             PlaceholderText="e.g., X-API-Key, api_key"
                             Background="{StaticResource InputBackgroundBrush}"
                             BorderBrush="{StaticResource RequestBarBorderBrush}"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             FontFamily="{StaticResource MonospaceFontFamily}"
                             Padding="12,10" />
                </StackPanel>
                <StackPanel Spacing="8">
                    <TextBlock Text="Value"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <PasswordBox x:Name="ApiKeyValueInput"
                                 PasswordChanged="ApiKeyValue_PasswordChanged"
                                 PlaceholderText="Enter API key value"
                                 Background="{StaticResource InputBackgroundBrush}"
                                 BorderBrush="{StaticResource RequestBarBorderBrush}"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontFamily="{StaticResource MonospaceFontFamily}"
                                 Padding="12,10" />
                </StackPanel>
                <StackPanel Spacing="8">
                    <TextBlock Text="Add to"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontFamily="{StaticResource AppFontFamilyMedium}"
                               FontSize="12" />
                    <ComboBox x:Name="ApiKeyLocationComboBox"
                              SelectionChanged="ApiKeyLocation_SelectionChanged"
                              MinWidth="160"
                              Background="{StaticResource MethodSelectorBgBrush}"
                              BorderThickness="1"
                              BorderBrush="{StaticResource RequestBarBorderBrush}"
                              Padding="12,8">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}"
                                           Foreground="{StaticResource TextPrimaryBrush}"
                                           FontFamily="{StaticResource AppFontFamily}"
                                           FontSize="13" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
                <Border Background="{StaticResource SurfaceVariantBrush}"
                        CornerRadius="6"
                        Padding="12"
                        Margin="0,12,0,0">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE946;" FontSize="14" Foreground="{StaticResource InfoBrush}" />
                        <TextBlock Text="API key can be sent as a header or query parameter."
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="{StaticResource AppFontFamily}"
                                   FontSize="12"
                                   TextWrapping="Wrap" />
                    </StackPanel>
                </Border>
            </StackPanel>
            
            <!-- OAuth 2.0 Panel -->
            <ScrollViewer x:Name="AuthOAuth2Panel" Visibility="Collapsed">
                <StackPanel Spacing="20" MaxWidth="500">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Access Token"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="{StaticResource AppFontFamilyMedium}"
                                   FontSize="12" />
                        <TextBox x:Name="OAuth2AccessTokenInput"
                                 TextChanged="OAuth2_TextChanged"
                                 PlaceholderText="Enter access token"
                                 Background="{StaticResource InputBackgroundBrush}"
                                 BorderBrush="{StaticResource RequestBarBorderBrush}"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontFamily="{StaticResource MonospaceFontFamily}"
                                 Padding="12,10"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 MinHeight="60" />
                    </StackPanel>
                    <StackPanel Spacing="8">
                        <TextBlock Text="Token Type"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="{StaticResource AppFontFamilyMedium}"
                                   FontSize="12" />
                        <TextBox x:Name="OAuth2TokenTypeInput"
                                 TextChanged="OAuth2TokenType_TextChanged"
                                 PlaceholderText="Bearer"
                                 Background="{StaticResource InputBackgroundBrush}"
                                 BorderBrush="{StaticResource RequestBarBorderBrush}"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontFamily="{StaticResource MonospaceFontFamily}"
                                 Padding="12,10" />
                    </StackPanel>
                    <Border Background="{StaticResource SurfaceVariantBrush}"
                            CornerRadius="6"
                            Padding="12">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE946;" FontSize="14" Foreground="{StaticResource InfoBrush}" />
                            <TextBlock Text="Enter your existing OAuth 2.0 access token."
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontFamily="{StaticResource AppFontFamily}"
                                       FontSize="12"
                                       TextWrapping="Wrap" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl>
