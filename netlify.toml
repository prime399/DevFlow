[build]
  # Publish directory (where the WASM output will be)
  publish = "DevFlow/bin/Release/net10.0-browserwasm/publish/wwwroot"
  
  # Build command
  command = "dotnet publish DevFlow/DevFlow.csproj -c Release -f net10.0-browserwasm"

[build.environment]
  # Use .NET 10
  DOTNET_VERSION = "10.0"

# SPA routing - redirect all requests to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Headers for proper WASM support
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
  for = "/*.wasm"
  [headers.values]
    Content-Type = "application/wasm"

[[headers]]
  for = "/*.dll"
  [headers.values]
    Content-Type = "application/octet-stream"
